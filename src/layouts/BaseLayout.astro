---
import "../styles/global.css";
// import ThemeToggle from "../components/ThemeToggle";

interface Props {
  title?: string;
}

const { title = "Bryce Kennedy – Portfolio" } = Astro.props;
const base = import.meta.env.BASE_URL;
---

<html lang="en" class="dark">
  <head>
    <meta charset="utf-8" />
    <title>{title}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" type="image/svg+xml" href={`${base}favicon.svg`} />
    <style>
      @view-transition {
        navigation: auto;
      }
    </style>
  </head>
  <body class="min-h-screen bg-surface-dark text-text-light">
    <div class="min-h-screen flex flex-col">
      <header class="border-b border-gray-dark/70 bg-surface-dark/90 backdrop-blur">
        <div class="max-w-5xl mx-auto px-4 py-3 flex items-center justify-between gap-4">
          <a href={base} class="font-semibold tracking-tight">
            Bryce Kennedy
          </a>
          <nav class="flex items-center gap-4 text-sm">
            <a href="#projects" class="hover:text-brand-orange transition-colors">
              Projects
            </a>
            <a href="#about" class="hover:text-brand-orange transition-colors">
              About
            </a>
            <!-- <ThemeToggle client:load /> -->
          </nav>
        </div>
      </header>

      <main class="flex-1">
        <slot />
      </main>

      <footer class="border-t border-gray-dark/70 py-4 text-xs text-text-muted">
        <div class="max-w-5xl mx-auto px-4 flex justify-between">
          <span>© {new Date().getFullYear()} Bryce Kennedy</span>
          <span>Built with Astro · React · Rive</span>
        </div>
      </footer>
    </div>

    <script>
      // Smooth scroll with offset for fixed header
      document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (this: HTMLAnchorElement, e) {
          const href = this.getAttribute('href');
          if (href && href !== '#') {
            e.preventDefault();
            const target = document.querySelector(href);
            if (target) {
              const headerOffset = 80;
              const elementPosition = target.getBoundingClientRect().top;
              const offsetPosition = elementPosition + window.pageYOffset - headerOffset;

              window.scrollTo({
                top: offsetPosition,
                behavior: 'smooth'
              });
            }
          }
        });
      });
    </script>
  </body>
</html>
